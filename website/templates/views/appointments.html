{% extends 'base.html' %} {% block head %}
<title>appointments</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="{{url_for('static', filename='js/apptTotalSum.js')}}"></script>
{% endblock %} {% block body %}
<div class="content">
  <h1 style="text-align: center">Appointments</h1>
  {% if appointments | length < 1 %}
  <h4 style="text-align: center">There are no appointments</h4>
  {% else %}
  <table>
    <tr>
      <th>Client</th>
      <th>Service</th>
      <th>Employee</th>
      <th>Appointment Date/Time</th>
      <th>Tips</th>
      <th>Total</th>
      <th>Update?</th>
    </tr>
    {% for appt, service, employee in appointments %}
    <tr>
      <td>{{appt.client}}</td>
      <td>{{service}}</td>
      <td>{{employee}}</td>
      <td>{{appt.apptDateTime}}</td>
      {% if appt.tips == 0 %}
      <td>---</td>
      {% else %}
      <td>{{appt.tips}}</td>
      {% endif %} {% if appt.total == 0 %}
      <td>---</td>
      {% else %}
      <td>{{appt.total}}</td>
      {% endif %}
      <td>
        <a href="/appointments/delete/{{appt.id}}">Delete</a>
        <a href="/appointments/update/{{appt.id}}">Update</a>
      </td>
    </tr>
    {% endfor %}
  </table>
  {% endif %}

  <form action="/" method="POST">
    <div class="form-group">
      <label for="client">Client Name</label>
      <input
        type="text"
        class="form-control"
        name="client"
        placeholder="Client Name"
      />
    </div>
    <div class="form-group">
      <label for="service">Service</label>
      {% if serviceList | length < 1 %}
      <select
        multiple
        class="form-control"
        name="service"
        id="service"
        disabled
      ></select>
      {% else %}
      <select multiple class="form-control" name="service" id="service">
        {% for s in serviceList %}
        <option value="{{s.id}} {{s.price}}">{{s.name}} ${{s.price}}</option>
        {% endfor %}
      </select>
      {% endif %}
    </div>
    <div class="form-group">
      <label for="employee">Employee</label>
      {% if employeeList | length < 1 %}
      <select class="form-control" name="employee" disabled></select>
      {% else %}
      <select class="form-control" name="employee">
        {% for e in employeeList %}
        <option value="{{e.id}}">{{e.name}}</option>
        {% endfor %}
      </select>
      {% endif %}
    </div>
    <div class="form-group">
      <label for="clientName">Appointment Date and Time</label>
      <input type="date" class="form-control" name="appt_date" />
      <input type="time" class="form-control" name="appt_time" />
    </div>
    <div class="form-group">
      <label for="tip">Tip</label>
      <input
        type="number"
        class="form-control"
        name="tip"
        id="tip"
        min="0.01"
        step="0.01"
        placeholder="0"
      />
    </div>
    <div class="form-group">
      <label for="total">Total</label>
      <input
        type="number"
        class="form-control"
        name="total"
        id="total"
        min="0.01"
        step="0.01"
        placeholder="0"
        disabled
      />
    </div>
    <input type="submit" class="btn btn-primary mb-2" />
  </form>
</div>
{% endblock %}
